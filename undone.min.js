(function(){var n={dids:[],undids:[],canUndo:function(){return this.dids.length>0},canRedo:function(){return this.undids.length>0},push:function(n){this.execute(null,n)},execute:function(o,i,t){var d;(void 0===t||null===t)&&(t={}),this.isFct(o)&&t.async!==!0&&(d=o()),n.isInAsyncRedo!==!0&&(this.undids=[]),n.isInAsyncRedo=!1,t.data&&(d=t.data);var s=function s(){i(d)};return this.dids.push({redo:o,undo:i,wrappedUndo:s,options:t}),this.fireEvents(),d},undo:function(){var n=this.dids&&this.dids.length>0?this.dids.pop():null;this.isFct(n.wrappedUndo)&&(n.wrappedUndo(),this.isFct(n.redo)&&this.undids.push({redo:n.redo,undo:n.undo,options:n.options})),this.fireEvents()},redo:function(){var o=this.undids&&this.undids.length>0?this.undids.pop():null;if(this.isFct(o.redo)){n.isInAsyncRedo=o.options.async;var i=o.redo();o.options.data&&(i=o.options.data);var t=function t(){o.undo(i)};o.options.async!==!0&&this.dids.push({redo:o.redo,undo:o.undo,wrappedUndo:t,options:o.options})}this.fireEvents()},onChange:function(){return!1},onEmpty:function(){return!1},fireEvents:function(){this.onChange&&this.onChange(),0===this.dids.length&&0===this.undids.length&&this.onEmpty()},isFct:function(n){return n&&"function"==typeof n}};"undefined"!=typeof window?(void 0===window.javascriptKataDotCom&&(window.javascriptKataDotCom={}),void 0===window.jsKata&&(window.jsKata=window.javascriptKataDotCom),void 0===window.jskata&&(window.jskata=window.javascriptKataDotCom),void 0===window.jsk&&(window.jsk=window.javascriptKataDotCom),void 0===window._&&(window._=window.javascriptKataDotCom),window.javascriptKataDotCom.undo=n,window.javascriptKataDotCom.u=n,window.jskataUndo=window.javascriptKataDotCom.undo):"undefined"!=typeof module&&module.exports!==void 0&&(module.exports=n)})();